---
import BaseLayout from "../layouts/BaseLayout.astro";

// ✅ Build-time timestamp (real ISO string)
const DEPLOY_ISO = new Date().toISOString();

// ✅ Set your logo path here (must exist in /public)
const LOGO_SRC = "/cameracentralLOGO.png";
---

<BaseLayout title="Camera Central">
  <div class="relative">
    <!-- ✅ Full-width text, but reserve space for logo on large screens -->
    <div class="lg:pr-[420px]">
      <p class="mb-3 inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1 text-xs text-gray-600">
        <span class="h-2 w-2 rounded-full bg-green-500"></span>
        Last updated: <span id="ccLastUpdated">just now</span>
      </p>

      <!-- ✅ Wider headline + slightly smaller so it wraps less -->
      <h1 class="font-semibold tracking-tight leading-[1.05] text-4xl md:text-5xl max-w-4xl">
        Personal camera recommendation in under 2 minutes.
      </h1>

      <script is:inline define:vars={{ DEPLOY_ISO }}>
        function formatAgo(ms) {
          const s = Math.max(1, Math.floor(ms / 1000));
          const m = Math.floor(s / 60);
          const h = Math.floor(m / 60);
          const d = Math.floor(h / 24);

          if (d > 0) return `${d} day${d === 1 ? "" : "s"} ago`;
          if (h > 0) return `${h} hour${h === 1 ? "" : "s"} ago`;
          if (m > 0) return `${m} minute${m === 1 ? "" : "s"} ago`;
          return `${s} second${s === 1 ? "" : "s"} ago`;
        }

        function update() {
          const el = document.getElementById("ccLastUpdated");
          if (!el) return;

          const then = new Date(DEPLOY_ISO).getTime();
          if (!Number.isFinite(then)) {
            el.textContent = "recently";
            return;
          }
          el.textContent = formatAgo(Date.now() - then);
        }

        update();
        setInterval(update, 30_000);
      </script>

      <p class="text-lg text-gray-600 leading-relaxed mt-4 max-w-2xl">
        Camera Central asks a few questions, explains the tradeoffs, and recommends
        1–3 cameras that actually fit how you shoot.
      </p>

      <div class="mt-10">
        <div class="bg-gray-50 border border-gray-200 rounded-xl p-6 max-w-md">
          <h2 class="font-semibold text-lg mb-2">Take the quiz!</h2>

          <p class="text-gray-600 mb-4">
            Answer a few questions and we’ll recommend the best camera for you.
          </p>

          <a
            href="/find"
            class="inline-block bg-black text-white px-5 py-2 rounded-lg hover:bg-gray-800"
          >
            Find my camera
          </a>
        </div>
      </div>
    </div>

    <!-- ✅ Logo: right side, moved down, never overlaps text because of lg:pr above -->
    <div class="hidden lg:block absolute right-6 top-24">
      <div class="relative">
        <div class="absolute inset-0 -z-10 rounded-full blur-3xl bg-black/5"></div>
        <img
          src={LOGO_SRC}
          alt="Camera Central logo"
          class="w-[360px] xl:w-[420px] h-auto opacity-95 drop-shadow-xl select-none"
          loading="lazy"
          draggable="false"
        />
      </div>
    </div>
  </div>
</BaseLayout>