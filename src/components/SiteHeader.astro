<header class="w-full border-b border-gray-200 bg-white/90 backdrop-blur">
  <div class="mx-auto max-w-5xl px-6 py-4 flex items-center justify-between gap-4">
    <!-- Left: brand -->
    <a href="/" class="font-semibold text-gray-900 hover:opacity-80">
      Camera Central
    </a>

    <!-- Right: nav -->
    <nav class="flex items-center gap-4 text-sm text-gray-700">
      <a href="/find" class="hover:text-gray-900">Finder</a>
      <a href="/about" class="hover:text-gray-900">About</a>
      <a href="/disclaimer" class="hover:text-gray-900">Disclaimer</a>

      <a
        id="headerCompareLink"
        href="/compare"
        class="relative inline-flex items-center gap-1 font-medium text-gray-900 hover:opacity-80"
        style="cursor:pointer;"
      >
        Compare
        <span
          id="ccCompareBadge"
          class="hidden ml-1 rounded-full bg-black text-white text-xs px-2 py-0.5 leading-none"
        >
          0
        </span>
      </a>
    </nav>
  </div>
</header>

<!-- Optional local sync (BaseLayout already syncs it globally, but this doesn't hurt) -->
<script is:inline>
  (function () {
    const KEY = "cc_compare";
    function safeCount() {
      try {
        const arr = JSON.parse(localStorage.getItem(KEY) || "[]");
        return Array.isArray(arr) ? arr.filter(Boolean).length : 0;
      } catch {
        return 0;
      }
    }
    function setBadge(n) {
      const badge = document.getElementById("ccCompareBadge");
      if (!badge) return;
      if (!n) {
        badge.classList.add("hidden");
        badge.textContent = "0";
      } else {
        badge.classList.remove("hidden");
        badge.textContent = String(n);
      }
    }
    setBadge(safeCount());
    window.addEventListener("cc-compare-updated", (e) => {
      const ids = e?.detail?.ids;
      if (Array.isArray(ids)) setBadge(ids.filter(Boolean).length);
      else setBadge(safeCount());
    });
  })();
</script>