---
import BaseLayout from "../layouts/BaseLayout.astro";

// ✅ Build-time timestamp (real ISO string)
const DEPLOY_ISO = new Date().toISOString();

// ✅ Set your logo path here (must exist in /public)
const LOGO_SRC = "/cameracentralLOGO.png";
---

<BaseLayout title="Camera Central">
  <!-- TOP: headline + description (full width, no logo nearby) -->
  <div class="max-w-5xl">
    <p class="mb-3 inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1 text-xs text-gray-600">
      <span class="h-2 w-2 rounded-full bg-green-500"></span>
      Last updated: <span id="ccLastUpdated">just now</span>
    </p>

    <!-- Wider + a bit larger on desktop so it wraps less -->
    <h1 class="font-semibold tracking-tight leading-[1.05] text-4xl md:text-5xl lg:text-6xl">
      Personal camera recommendation in under 2 minutes.
    </h1>

    <script is:inline define:vars={{ DEPLOY_ISO }}>
      function formatAgo(ms) {
        const s = Math.max(1, Math.floor(ms / 1000));
        const m = Math.floor(s / 60);
        const h = Math.floor(m / 60);
        const d = Math.floor(h / 24);

        if (d > 0) return `${d} day${d === 1 ? "" : "s"} ago`;
        if (h > 0) return `${h} hour${h === 1 ? "" : "s"} ago`;
        if (m > 0) return `${m} minute${m === 1 ? "" : "s"} ago`;
        return `${s} second${s === 1 ? "" : "s"} ago`;
      }

      function update() {
        const el = document.getElementById("ccLastUpdated");
        if (!el) return;

        const then = new Date(DEPLOY_ISO).getTime();
        if (!Number.isFinite(then)) {
          el.textContent = "recently";
          return;
        }
        el.textContent = formatAgo(Date.now() - then);
      }

      update();
      setInterval(update, 30_000);
    </script>

    <!-- Allow this to stretch wider on desktop too -->
    <p class="text-lg text-gray-600 leading-relaxed mt-5 max-w-3xl">
      Camera Central asks a few questions, explains the tradeoffs, and recommends
      1–3 cameras that actually fit how you shoot.
    </p>
  </div>

<!-- BOTTOM: quiz card + logo aligned on the same row (desktop) -->
  <div class="mt-6 grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_420px] gap-10 items-start">
    <!-- Left column: Quiz card + article link -->
    <div class="flex flex-col">
      <div class="bg-gray-50 border border-gray-200 rounded-xl p-6 max-w-md">
        <h2 class="font-semibold text-lg mb-2">Take the quiz!</h2>

        <p class="text-gray-600 mb-4">
          Answer a few questions and we’ll recommend the best camera for you.
        </p>

        <a
          href="/find"
          class="inline-block bg-black text-white px-5 py-2 rounded-lg hover:bg-gray-800"
        >
          Find my camera
        </a>
      </div>

      <!-- ✅ Article link now sits right under the quiz box -->
      <a
        href="/best-camera-for-travel-photography"
        class="mt-6 inline-flex items-center gap-2 text-base text-gray-700 hover:text-gray-900 hover:underline"
        style="cursor:pointer;"
      >
        Best Camera for Travel Photography <span aria-hidden="true">→</span>
      </a>
    </div>

    <!-- Right column: Logo showcase (desktop only) -->
    <div class="hidden lg:flex justify-center">
      <div class="relative -mt-16">
        <img
          src={LOGO_SRC}
          alt="Camera Central logo"
          class="w-[320px] xl:w-[360px] h-auto opacity-95 select-none"
          loading="lazy"
        />
        <div class="absolute inset-0 -z-10 rounded-full blur-3xl bg-black/5"></div>
      </div>
    </div>
  </div>
</BaseLayout>