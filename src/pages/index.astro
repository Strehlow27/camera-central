---
import BaseLayout from "../layouts/BaseLayout.astro";

// ✅ Build-time timestamp (real ISO string)
const DEPLOY_ISO = new Date().toISOString();

// ✅ Set your logo path here (must exist in /public)
const LOGO_SRC = "/public/cameracentralLOGO.png";
---

<BaseLayout title="Camera Central">
  <!-- ✅ 2-column hero layout -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
    <!-- LEFT: your existing content -->
    <div>
      <!-- ✅ Put this ABOVE the headline -->
      <p class="mb-3 inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1 text-xs text-gray-600">
        <span class="h-2 w-2 rounded-full bg-green-500"></span>
        Last updated: <span id="ccLastUpdated">just now</span>
      </p>

      <h1 class="text-4xl font-semibold tracking-tight max-w-2xl">
        Personal camera recommendation in under 2 minutes.
      </h1>

      <script is:inline define:vars={{ DEPLOY_ISO }}>
        function formatAgo(ms) {
          const s = Math.max(1, Math.floor(ms / 1000));
          const m = Math.floor(s / 60);
          const h = Math.floor(m / 60);
          const d = Math.floor(h / 24);

          if (d > 0) return `${d} day${d === 1 ? "" : "s"} ago`;
          if (h > 0) return `${h} hour${h === 1 ? "" : "s"} ago`;
          if (m > 0) return `${m} minute${m === 1 ? "" : "s"} ago`;
          return `${s} second${s === 1 ? "" : "s"} ago`;
        }

        function update() {
          const el = document.getElementById("ccLastUpdated");
          if (!el) return;

          const then = new Date(DEPLOY_ISO).getTime();
          if (!Number.isFinite(then)) {
            el.textContent = "recently";
            return;
          }

          el.textContent = formatAgo(Date.now() - then);
        }

        update();
        setInterval(update, 30_000);
      </script>

      <p class="text-lg text-gray-600 max-w-2xl leading-relaxed mt-4">
        Camera Central asks a few questions, explains the tradeoffs, and recommends
        1–3 cameras that actually fit how you shoot.
      </p>

      <div class="mt-10">
        <div class="bg-gray-50 border border-gray-200 rounded-xl p-6 max-w-md">
          <h2 class="font-semibold text-lg mb-2">Take the quiz!</h2>

          <p class="text-gray-600 mb-4">
            Answer a few questions and we’ll recommend the best camera for you.
          </p>

          <a
            href="/find"
            class="inline-block bg-black text-white px-5 py-2 rounded-lg hover:bg-gray-800"
          >
            Find my camera
          </a>
        </div>
      </div>
    </div>

    <!-- RIGHT: big logo showcase (desktop only) -->
    <div class="hidden lg:flex justify-center">
      <div class="relative">
        <img
          src={LOGO_SRC}
          alt="Camera Central logo"
          class="w-[340px] xl:w-[380px] h-auto opacity-95 select-none"
          loading="lazy"
        />
        <!-- subtle “glow” behind the logo -->
        <div class="absolute inset-0 -z-10 rounded-full blur-3xl bg-black/5"></div>
      </div>
    </div>
  </div>
</BaseLayout>